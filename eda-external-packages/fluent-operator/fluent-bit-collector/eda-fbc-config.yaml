apiVersion: v1
kind: ConfigMap
metadata:
  name: fluent-bit-collector-config
  namespace: eda-system # kpt-set: ${EDA_CORE_NAMESPACE}
data:
  fluent-bit.conf: "[SERVICE]\n    Flush         1\n    Log_Level     info\n    Daemon        off\n\n[INPUT]\n    Name    forward\n    Port    2020\n    Buffer_Chunk_Size    1M\n    Buffer_Max_Size    6M\n\n[FILTER]\n    Name     modify\n    Match    eda.*\n    Remove   time\n\n[FILTER]\n    Name      modify\n    Match     eda.*\n    Rename    eda.nokia.com/app    appname\n    Rename    kube_pod_name    podname\n    Rename    eda.nokia.com/app-group    groupname  \n\n[FILTER]\n    Name    rewrite_tag\n    Match   eda.*\n    Rule    $appname \"eda-toolbox\" \"toolbox.$podname.log\" \"false\"\n    Rule    $appname \"git\" \"git.$podname.log\" \"false\"\n    Rule    $appname \"git-replica\" \"git-replica.$podname.log\" \"false\"\n    Rule    $appname \"apiserver\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"appstore\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"artifactserver\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"bootstrapserver\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"certchecker\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"configengine\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"cx\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"flowengine\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"keycloak\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"metricsserver\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"postgres\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"stateaggregator\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"statecontroller\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"stateengine\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"sim-testman-default\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $appname \"npp\" \"edaapp-$appname.$podname.log\" \"false\"\n    Rule    $groupname ^app-(.*)$ \"apps.$podname.log\" \"false\"\n    Rule    $appname ^(.+)$ \"edaapp.$podname.log\" \"false\"\n\n[FILTER]\n    Name    rewrite_tag\n    Match   edaapp-*.*\n    Rule    stream \"stderr\" \"errors.log\" \"false\"\n\n[FILTER]\n    Name    rewrite_tag\n    Match   edaapp.*.*\n    Rule    stream \"stderr\" \"errors.log\" \"false\"\n\n[FILTER]\n    Name    rewrite_tag\n    Match   apps.*.*\n    Rule    stream \"stderr\" \"errors.log\" \"false\"\n\n[FILTER]\n    Name    rewrite_tag\n    Match   edaapp-apiserver.*\n    Rule    logger \"access\" \"access.log\" \"false\"\n\n[FILTER]\n    Name    modify\n    Match   *\n    Remove  stream\n    Remove  kube_namespace_name\n    Remove  kube_pod_id\n    Remove  kube_docker_id\n    Remove  kube_container_hash\n    Remove  kube_container_image\n    Remove  groupname\n    Remove  eda.nokia.com/cert-check-port\n    Remove  pod-template-hash\n    Remove  date\n    Remove  ts\n    Remove  severity\n    Remove  level\n    Remove  module\n    Remove  caller\n    Remove  fn\n    Remove  tid\n    Remove  GoID\n    Remove  message\n    Remove  logger\n    Remove  msg\n    Remove  logNum\n\n[OUTPUT]\n    Name    file\n    Match   errors.*\n    Mkdir   true\n    Path    /var/log/eda\n    \n[OUTPUT]\n    Name    file\n    Match   access.*\n    Mkdir   true\n    Path    /var/log/eda\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-apiserver.*\n    Path    /var/log/eda/controlplane/apiserver\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-appstore.*\n    Path    /var/log/eda/controlplane/appstore\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-artifactserver.*\n    Path    /var/log/eda/controlplane/artifactserver\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-bootstrapserver.*\n    Path    /var/log/eda/controlplane/bootstrapserver\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-certchecker.*\n    Path    /var/log/eda/controlplane/certchecker\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-configengine.*\n    Path    /var/log/eda/controlplane/configengine\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-cx.*\n    Path    /var/log/eda/controlplane/cx\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   toolbox.*\n    Path    /var/log/eda/controlplane/toolbox\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-flowengine.*\n    Path    /var/log/eda/controlplane/flowengine\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   git.*\n    Path    /var/log/eda/controlplane/git\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   git-replica.*\n    Path    /var/log/eda/controlplane/git-replica\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-keycloak.*\n    Path    /var/log/eda/controlplane/keycloak\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-metricsserver.*\n    Path    /var/log/eda/controlplane/metricsserver\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-postgres.*\n    Path    /var/log/eda/controlplane/postgres\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-stateaggregator.*\n    Path    /var/log/eda/controlplane/stateaggregator\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-statecontroller.*\n    Path    /var/log/eda/controlplane/statecontroller\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-stateengine.*\n    Path    /var/log/eda/controlplane/stateengine\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-sim-testman-default.*\n    Path    /var/log/eda/cx-cluster/sim-testman\n    Mkdir   true\n    \n[OUTPUT]\n    Name    file\n    Match   edaapp-npp.*\n    Path    /var/log/eda/dataplane/npp\n    Mkdir   true\n\n[OUTPUT]\n    Name    file\n    Match   apps.*\n    Path    /var/log/eda/apps\n    Mkdir   true\n\n[OUTPUT]\n    Name    file\n    Match   edaapp.*\n    Path    /var/log/eda/others\n    Mkdir   true\n\n[OUTPUT]\n    Name    file\n    Match   eda.*\n    Path    /var/log/eda/unknown\n    Mkdir   true"
