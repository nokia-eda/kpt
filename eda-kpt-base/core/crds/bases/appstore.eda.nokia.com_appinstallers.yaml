apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  name: appinstallers.appstore.eda.nokia.com
spec:
  group: appstore.eda.nokia.com
  names:
    kind: AppInstaller
    listKind: AppInstallerList
    plural: appinstallers
    singular: appinstaller
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.operation
      name: Operation
      type: string
    - jsonPath: .status.result
      name: Result
      type: string
    - jsonPath: .spec.dryRun
      name: DryRun
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        description: AppInstaller
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            properties:
              apps:
                description: Apps are the input apps to the installer.
                items:
                  properties:
                    appId:
                      description: AppID of the app, which is the unique identifier of an app. It should be equal to the group of the app.
                      type: string
                    appSettings:
                      description: |-
                        AppSettings defines a list of variables and their value. Only variables that are customized need to be mentioned.
                        If AppSettings are not again mentioned on upgrade, values will remain as is.
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                    catalog:
                      description: |-
                        Catalog of the app to be installed.
                        This is where app manifest is retrieved from, along with some other metadata.
                      type: string
                    version:
                      description: Version of the App that is to be installed.
                      properties:
                        type:
                          default: semver
                          description: |-
                            The version type of the App. Currently supported: semver, commit.
                            Default is semver.
                          enum:
                          - semver
                          - commit
                          type: string
                        value:
                          description: |-
                            The version of the App.
                            If the VersionType is set to semver,
                            then the semantic version of the git tag in the form of "apps/<appname>/<semver>" is used.
                            If the VersionType is set to commit,
                            then the commit reference (e.g. git hash) is expected.
                          type: string
                      required:
                      - value
                      type: object
                  required:
                  - appId
                  - catalog
                  - version
                  type: object
                type: array
              autoProcessRequirements:
                description: |-
                  AutoProcessRequirements tells the installer what it can do w.r.t. the requirements of an app.
                  Currently only 'strict' is supported.
                items:
                  type: string
                type: array
              dryRun:
                default: false
                description: |-
                  DryRun indicates whether to run the installer without actually applying the manifest to the system.
                  The results will be put in a transaction result.
                type: boolean
              operation:
                description: |-
                  Operation is the installing operation.
                  Currently supported are 'install', 'delete'.
                enum:
                - install
                - delete
                type: string
            required:
            - apps
            - operation
            type: object
          status:
            properties:
              error:
                type: string
              id:
                description: ID is the workflow ID that can be used to get more information on.
                type: integer
              result:
                type: string
            required:
            - result
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
